<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Classes Test Global errorextend Global Methods error(msg, expected, actual) Return an `Error` with `msg` and results properties. Parameters: Name Type Description msg String expected Mixed actual Mixed Returns: Type Error extend(target, data) Extends an object Parameters: Name Type Description target Object data * × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-06-17T11:48:15-04:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes Test Global errorextend Classes Classes Test Test × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-06-17T11:48:16-04:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes Test Global errorextend SPY R/RSpy on your inner controller processes, create and test actions against server request/response without spinning up a live instance, using the supertest API. UsageImportYou can import either via CommonJS or ES6, depending on what you're using. var mockRequest = require( 'spyrr' );or, ES6: import mockRequest from 'spyrr';Test a request/response, and spy on inner methodsES5:import controller from './routes/endpoint.js'; describe( 'POST /endpoint', function() { var someTestObject = { test: true }; beforeEach( function() { spyOn( controller.endpoint, 'checkAuthorization' ).and.callFake( function() { return false; }); }); it( 'should reject requests with an invalid auth token', function( done ) { mockRequest( controller.endpoint ) .params( { path: 'testpath', id: 'my-test' } ) .query( { authToken: 'someInvalidToken' } ) .body( { someObject: someTestObject } ) .expect( 'Content-Type', /json/ ) .expect( 401, { error: true }, done ) ; }); });ES6:import controller from './routes/endpoint.js'; describe( 'POST /endpoint', () =&gt; { let someTestObject = { test: true }; beforeEach( function() { spyOn( controller.endpoint, 'checkAuthorization' ).and.callFake( () =&gt; { return false; }); }); it( 'should reject requests with an invalid auth token', done =&gt; { mockRequest( controller.endpoint ) .params( { path: 'testpath', id: 'my-test' } ) .query( { authToken: 'someInvalidToken' } ) .body( { someObject: someTestObject } ) .expect( 'Content-Type', /json/ ) .expect( 401, { error: true }, done ) ; }); });BuildNote: there are only minimal tests thus far. More are on the way! You can build easily with gulp, which will test then build. To just test, run gulp test. RequirementsBuilt to work with jasmine, though it may work with other testing frameworks. ContributePlease fork the project, then use a pull request to make improvements and fixes. This is very new so there is likely to be many undocumented issues, especially with non-jasmine frameworks. Authors and AcknowledgementsWritten by Rob Porter. Based upon both supertest and dupertest. Thanks to TJ Holowaychuk and Tyler Olson for these. LicenseMIT × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-06-17T11:48:16-04:00 using the DocStrap template. "},"Test.html":{"id":"Test.html","title":"Class: Test","body":" Documentation Classes Test Global errorextend Class: Test Test Allows for testing of the request() method new Test() Methods _assertBody(body, res) Perform assertions on a response body and return an Error upon failure. Parameters: Name Type Description body Mixed res Response Returns: Type Error _assertFunction(fn, res) Performs an assertion by calling a function and return an Error upon failure. Parameters: Name Type Description fn function res Response Returns: Type Error _assertHeader(header, res) Perform assertions on a response header and return an Error upon failure. Parameters: Name Type Description header Object res Response Returns: Type Error _assertStatus(status, res) Perform assertions on the response status and return an Error upon failure. Parameters: Name Type Description status Number res Response Returns: Type Error assert(resError, res, fn) Perform assertions and invoke `fn(err, res)`. Parameters: Name Type Argument Description resError Error &lt;nullable&gt; res Response fn function beforeSend(transformer) Before Send Parameters: Name Type Description transformer function Returns: Type Test body(body) Set the body in the request Parameters: Name Type Description body Object Returns: Type Test end(fn) Defers the action to the end of the chain Parameters: Name Type Description fn function errNext(callback) Allows for error handling in middleware, expecting next( err ) to be called Parameters: Name Type Description callback function Returns: Type Test expect() Expectations: .expect( 200 ) .expect( 200, fn ) .expect( 200, body ) .expect( 'Some body' ) .expect( 'Some body', fn ) .expect( 'Content-Type', 'application/json' ) .expect( 'Content-Type', 'application/json', fn ) .expect( fn) Returns: Type Test extendReq(data) Extend the request object further Parameters: Name Type Description data * Returns: Type Test extendRes(data) Extend the resource object further Parameters: Name Type Description data * Returns: Type Test files(files) Set the files in the request Note: In Express 4, req.files is no longer available on the req object by default. To access uploaded files on the req.files object, use multipart-handling middleware like busboy, multer, formidable, multiparty, connect-multiparty, or pez. Parameters: Name Type Description files Object Returns: Type Test headers(headers) Set the headers in the request Parameters: Name Type Description headers * Returns: Type Test next(callback) Allow for test of middleware controllers that may not actually return a response Parameters: Name Type Description callback function Returns: Type Test params(params) Set the params for a request Parameters: Name Type Description params Object Returns: Type Test query(query) Set the request query params Parameters: Name Type Description query Object Returns: Type Test Class: Test Test new Test(action) Initialize a new `Test` with the given `app`, request `method` and `path`. Parameters: Name Type Description action function Methods _assertBody(body, res) Perform assertions on a response body and return an Error upon failure. Parameters: Name Type Description body Mixed res Response Returns: Type Error _assertFunction(fn, res) Performs an assertion by calling a function and return an Error upon failure. Parameters: Name Type Description fn function res Response Returns: Type Error _assertHeader(header, res) Perform assertions on a response header and return an Error upon failure. Parameters: Name Type Description header Object res Response Returns: Type Error _assertStatus(status, res) Perform assertions on the response status and return an Error upon failure. Parameters: Name Type Description status Number res Response Returns: Type Error assert(resError, res, fn) Perform assertions and invoke `fn(err, res)`. Parameters: Name Type Argument Description resError Error &lt;nullable&gt; res Response fn function beforeSend(transformer) Before Send Parameters: Name Type Description transformer function Returns: Type Test body(body) Set the body in the request Parameters: Name Type Description body Object Returns: Type Test end(fn) Defers the action to the end of the chain Parameters: Name Type Description fn function errNext(callback) Allows for error handling in middleware, expecting next( err ) to be called Parameters: Name Type Description callback function Returns: Type Test expect() Expectations: .expect( 200 ) .expect( 200, fn ) .expect( 200, body ) .expect( 'Some body' ) .expect( 'Some body', fn ) .expect( 'Content-Type', 'application/json' ) .expect( 'Content-Type', 'application/json', fn ) .expect( fn) Returns: Type Test extendReq(data) Extend the request object further Parameters: Name Type Description data * Returns: Type Test extendRes(data) Extend the resource object further Parameters: Name Type Description data * Returns: Type Test files(files) Set the files in the request Note: In Express 4, req.files is no longer available on the req object by default. To access uploaded files on the req.files object, use multipart-handling middleware like busboy, multer, formidable, multiparty, connect-multiparty, or pez. Parameters: Name Type Description files Object Returns: Type Test headers(headers) Set the headers in the request Parameters: Name Type Description headers * Returns: Type Test next(callback) Allow for test of middleware controllers that may not actually return a response Parameters: Name Type Description callback function Returns: Type Test params(params) Set the params for a request Parameters: Name Type Description params Object Returns: Type Test query(query) Set the request query params Parameters: Name Type Description query Object Returns: Type Test × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-06-17T11:48:16-04:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
